<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VRKeyboard</title>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <link rel="stylesheet" type="text/css" href="css/keyboard.css"/>
    <script src="libs/three.min.js"></script>
    <script src="js/threejs/renderers/CSS3DRenderer.js"></script>
    <script src="js/threejs/controls/TrackballControls.js"></script>
    <script src="js/VRKeyboard.js"></script>
    <script>
        var container;
        var camera;
        var sceneGl, rendererGl;
        var sceneCss, rendererCss;
        var controls;
        var vrKeyboard

        function init(element)
        {
            container= document.getElementById(element);
            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 20000);

            sceneGl = new THREE.Scene();
            sceneCss = new THREE.Scene();


            rendererCss = new THREE.CSS3DRenderer();
            rendererCss.setSize(window.innerWidth, window.innerHeight);
            rendererCss.domElement.style.position = 'absolute';
            rendererCss.domElement.style.top = 0;


            rendererGl = new THREE.WebGLRenderer({alpha:true});
            rendererGl.setClearColor(0x00ff00, 0.0);

            rendererGl.setSize(window.innerWidth, window.innerHeight);

            rendererGl.domElement.style.position = 'absolute';
            rendererGl.domElement.style.zIndex = 1;
            rendererGl.domElement.style.top = 0;
            rendererGl.domElement.style.pointerEvents = 'none';
            rendererCss.domElement.appendChild(rendererGl.domElement);

            container.appendChild(rendererCss.domElement);

            controls = new THREE.TrackballControls(camera, rendererCss.domElement);
            controls.maxPolarAngle = Math.PI * 0.5;
            controls.minDistance = 100;
            controls.maxDistance = 25000;

            camera.position.set(0, 0, 1500);
            camera.lookAt(new THREE.Vector3(0,0,0))

            window.addEventListener('resize', onWindowResize, false);

            animate();


            //Keyboard
            vrKeyboard=new VRKeyboard() //must be a singleton
            sceneCss.add(vrKeyboard)

        }

        function onWindowResize()
        {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            rendererGl.setSize(window.innerWidth, window.innerHeight);
            rendererCss.setSize(window.innerWidth, window.innerHeight);
        }

        function animate()
        {
            requestAnimationFrame(animate);
            controls.update();
            rendererGl.render(sceneGl, camera);
            rendererCss.render(sceneCss, camera);
        }







    </script>
</head>
<body onload="init('container')">
<div id="container"></div>
</body>
</html>